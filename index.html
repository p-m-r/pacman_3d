<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Pacman 3D</title>
</head>
<style>
	body {
		margin: 0;
		padding: 0;
	}
	canvas {
		width: 100%;
		height: 100%;
	}
</style>
<script src="js/three.min.js"></script>
<script src="js/OrbitControls.js"></script>

<body>
	<script>
		const WIDTH = window.innerWidth;
		const HEIGHT = window.innerHeight;
		let renderer = new THREE.WebGLRenderer({antialias: true});
		let scene = new THREE.Scene();
		renderer.setSize(WIDTH, HEIGHT);
		document.body.appendChild(renderer.domElement);

		let camera = new THREE.PerspectiveCamera(70, WIDTH/HEIGHT);
		camera.position.z = 150;
		camera.position.y = 55;
		camera.position.x = 50;
		camera.lookAt(50, 0, 0,);
		scene.add(camera);

		let controls = new THREE.OrbitControls(camera, renderer.domElement);

		let box = new THREE.BoxGeometry(10, 10, 10);
		let material = new THREE.MeshLambertMaterial({color: 0x0095DD});

		let cube = new THREE.Mesh(box, material);
		cube.translateX(-40);
		cube.translateY(35);
		scene.add(cube);

		let rotX = 0.0;
		let rotY = 0.0;
		let rotZ = 0.0;

		let light = new THREE.DirectionalLight(0xFFFFFF);
		light.position.set(10, 10, 5);
		scene.add(light);

		let ambientLight = new THREE.AmbientLight(0x404040);
		scene.add(ambientLight);

		const worldMap = [
			[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
			[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
			[1,0,1,1,0,1,1,1,1,0,1,1,1,1,1,1,1,1,0,1,1,1,1,0,1,1,0,1],
			[1,0,1,1,0,1,1,1,1,0,1,1,1,1,1,1,1,1,0,1,1,1,1,0,1,1,0,1],
			[1,0,1,1,0,1,1,1,1,0,1,1,0,0,0,0,1,1,0,1,1,1,1,0,1,1,0,1],
			[1,0,1,1,0,0,0,0,0,0,1,1,0,1,1,0,1,1,0,0,0,0,0,0,1,1,0,1],
			[1,0,1,1,1,1,0,1,1,0,1,1,0,1,1,0,1,1,0,1,1,0,1,1,1,1,0,1],
			[1,0,1,1,1,1,0,1,1,0,1,1,0,1,1,0,1,1,0,1,1,0,1,1,1,1,0,1],
			[1,0,0,0,0,0,0,1,1,0,0,0,0,1,1,0,0,0,0,1,1,0,0,0,0,0,0,1],
			[1,1,1,0,1,1,1,1,1,1,1,1,0,1,1,0,1,1,1,1,1,1,1,1,0,1,1,1],
			[ , ,1,0,1,1,1,1,1,1,1,1,0,1,1,0,1,1,1,1,1,1,1,1,0,1, , ],
			[ , ,1,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,1, , ],
			[1,1,1,0,1,1,0,1,1,0,1,1,1, , ,1,1,1,0,1,1,0,1,1,0,1,1,1],
			[0,0,0,0,1,1,0,1,1,0,1, , , , , , ,1,0,1,1,0,1,1,0,0,0,0],
			[1,1,1,1,1,1,0,0,0,0,1, , , , , , ,1,0,0,0,0,1,1,1,1,1,1],
			[1,1,1,1,1,1,0,1,1,0,1, , , , , , ,1,0,1,1,0,1,1,1,1,1,1],
			[0,0,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,0,1,1,0,1,1,0,0,0,0],
			[1,1,1,0,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0,1,1,0,1,1,0,1,1,1],
			[ , ,1,0,0,0,0,1,1,1,1,1,0,1,1,0,1,1,1,1,1,0,0,0,0,1, , ],
			[ , ,1,0,1,1,0,1,1,1,1,1,0,1,1,0,1,1,1,1,1,0,1,1,0,1, , ],
			[ , ,1,0,1,1,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,1,1,0,1, , ],
			[ , ,1,0,1,1,1,1,1,0,1,1,0,1,1,0,1,1,0,1,1,1,1,1,0,1, , ],
			[1,1,1,0,1,1,1,1,1,0,1,1,0,1,1,0,1,1,0,1,1,1,1,1,0,1, , ],
			[1,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,1],
			[1,0,1,1,1,1,0,1,1,0,1,1,1,1,1,1,1,1,0,1,1,0,1,1,1,1,0,1],
			[1,0,1,1,1,1,0,1,1,0,1,1,1,1,1,1,1,1,0,1,1,0,1,1,1,1,0,1],
			[1,0,1,1,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,1,1,0,1],
			[1,0,1,1,0,1,1,1,1,1,1,1,0,1,1,0,1,1,1,1,1,1,1,0,1,1,0,1],
			[1,0,1,1,0,1,1,1,1,1,1,1,0,1,1,0,1,1,1,1,1,1,1,0,1,1,0,1],
			[1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1],
			[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
		];

		createCubesAndBalls();

		render();

		function render() {
			requestAnimationFrame(render);
			rotX += 0.015;
			rotY += 0.005;
			cube.rotation.set(rotX, rotY, rotZ);
			renderer.render(scene, camera);
		}
		
		function createCubesAndBalls() {
			const size = 10;
			let box = new THREE.BoxGeometry(size, size, size);
			let material = new THREE.MeshLambertMaterial({color: 0x0095DD});
			let cube = new THREE.Mesh(box, material);
			let cubes = [];
			let sphere = new THREE.SphereGeometry(2, 5, 5);
			let sphereMaterial = new THREE.MeshLambertMaterial({color: 0xFFFFFF});
			let ball = new THREE.Mesh(sphere, sphereMaterial);
			let balls = [];
			for (let i = 0; i < worldMap.length; ++i) {
				for (let j = 0; j < worldMap[0].length; ++j) {
					if (worldMap[i][j] === 1) {
						let copy = cube.clone();
						copy.position.set(i*size, 0, j*size);
						cubes.push(copy);
						scene.add(copy);
					} else if (worldMap[i][j] === 0) {
						let copy = ball.clone();
						copy.position.set(i*size + size*0.5 - 3, 0, j*size + size*0.5 - 3);
						balls.push(copy);
						scene.add(copy);
					}
				}
			}
		}
	</script>
	
</body>
</html>